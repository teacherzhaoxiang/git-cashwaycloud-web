import { Injectable, Inject, Component, Input, forwardRef, EventEmitter, Output, ChangeDetectionStrategy, ChangeDetectorRef, NgZone, NgModule } from '@angular/core';
import { DOCUMENT, CommonModule } from '@angular/common';
import { Subject } from 'rxjs';
import { NG_VALUE_ACCESSOR } from '@angular/forms';

var ScriptService = /** @class */ (function () {
    function ScriptService(doc) {
        this.doc = doc;
        this.loaded = false;
        this.list = {};
        this.emitter = new Subject();
    }
    ScriptService.prototype.getChangeEmitter = function () {
        return this.emitter;
    };
    ScriptService.prototype.load = function (path) {
        var _this = this;
        if (this.loaded)
            return this;
        this.loaded = true;
        var promises = [];
        path.forEach(function (script) { return promises.push(_this.loadScript(script)); });
        Promise.all(promises).then(function () { return _this.emitter.next(true); });
        return this;
    };
    ScriptService.prototype.loadScript = function (path) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            if (_this.list[path] === true) {
                resolve({
                    path: path,
                    loaded: true,
                    status: 'Loaded',
                });
                return;
            }
            _this.list[path] = true;
            var node = _this.doc.createElement('script');
            node.type = 'text/javascript';
            node.src = path;
            node.charset = 'utf-8';
            if (node.readyState) {
                // IE
                node.onreadystatechange = function () {
                    if (node.readyState === 'loaded' || node.readyState === 'complete') {
                        node.onreadystatechange = null;
                        resolve({
                            path: path,
                            loaded: true,
                            status: 'Loaded',
                        });
                    }
                };
            }
            else {
                node.onload = function () {
                    resolve({
                        path: path,
                        loaded: true,
                        status: 'Loaded',
                    });
                };
            }
            node.onerror = function () {
                return resolve({
                    path: path,
                    loaded: false,
                    status: 'Loaded',
                });
            };
            _this.doc.getElementsByTagName('head')[0].appendChild(node);
        });
    };
    ScriptService.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    ScriptService.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] }
    ]; };
    return ScriptService;
}());

var UEditorConfig = /** @class */ (function () {
    function UEditorConfig() {
    }
    return UEditorConfig;
}());

var _hook_finished = false;
var UEditorComponent = /** @class */ (function () {
    function UEditorComponent(ss, cog, cd, zone) {
        this.ss = ss;
        this.cog = cog;
        this.cd = cd;
        this.zone = zone;
        this.inited = false;
        this.events = {};
        this.loading = true;
        this.id = "_ueditor-" + Math.random()
            .toString(36)
            .substring(2);
        this.loadingTip = '加载中...';
        this._disabled = false;
        /** 延迟初始化 */
        this.delay = 50;
        this.onPreReady = new EventEmitter();
        this.onReady = new EventEmitter();
        this.onDestroy = new EventEmitter();
    }
    Object.defineProperty(UEditorComponent.prototype, "disabled", {
        set: function (value) {
            this._disabled = value;
            this.setDisabled();
        },
        enumerable: true,
        configurable: true
    });
    UEditorComponent.prototype.ngOnInit = function () {
        this.inited = true;
    };
    UEditorComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        // 已经存在对象无须进入懒加载模式
        if (window.UE) {
            this.initDelay();
            return;
        }
        this.ss
            .load(this.cog.js)
            .getChangeEmitter()
            .subscribe(function (res) {
            _this.initDelay();
        });
    };
    UEditorComponent.prototype.ngOnChanges = function (changes) {
        if (this.inited && changes.config) {
            this.destroy();
            this.initDelay();
        }
    };
    UEditorComponent.prototype.initDelay = function () {
        var _this = this;
        setTimeout(function () { return _this.init(); }, this.delay);
    };
    UEditorComponent.prototype.init = function () {
        var _this = this;
        if (!window.UE)
            throw new Error('uedito js文件加载失败');
        if (this.instance)
            return;
        // registrer hook
        if (this.cog.hook && !_hook_finished) {
            _hook_finished = true;
            this.cog.hook(UE);
        }
        this.onPreReady.emit(this);
        var opt = Object.assign({}, this.cog.options, this.config);
        this.zone.runOutsideAngular(function () {
            var ueditor = UE.getEditor(_this.id, opt);
            ueditor.ready(function () {
                _this.instance = ueditor;
                if (_this.value)
                    _this.instance.setContent(_this.value);
                _this.onReady.emit(_this);
            });
            ueditor.addListener('contentChange', function () {
                _this.value = ueditor.getContent();
                _this.zone.run(function () { return _this.onChange(_this.value); });
            });
        });
        this.loading = false;
        this.cd.detectChanges();
    };
    UEditorComponent.prototype.destroy = function () {
        var _this = this;
        if (this.instance) {
            this.zone.runOutsideAngular(function () {
                Object.keys(_this.events).forEach(function (name) {
                    return _this.instance.removeListener(name, _this.events[name]);
                });
                _this.instance.removeListener('ready');
                _this.instance.removeListener('contentChange');
                _this.instance.destroy();
                _this.instance = null;
            });
        }
        this.onDestroy.emit();
    };
    UEditorComponent.prototype.setDisabled = function () {
        if (!this.instance)
            return;
        if (this._disabled) {
            this.instance.setDisabled();
        }
        else {
            this.instance.setEnabled();
        }
    };
    Object.defineProperty(UEditorComponent.prototype, "Instance", {
        /**
         * 获取UE实例
         *
         * @readonly
         */
        get: function () {
            return this.instance;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * 设置编辑器语言
     */
    UEditorComponent.prototype.setLanguage = function (lang) {
        var _this = this;
        this.ss
            .loadScript(this.cog.options.UEDITOR_HOME_URL + "/lang/" + lang + "/" + lang + ".js")
            .then(function (res) {
            _this.destroy();
            // 清空语言
            if (!UE._bak_I18N) {
                UE._bak_I18N = UE.I18N;
            }
            UE.I18N = {};
            UE.I18N[lang] = UE._bak_I18N[lang];
            _this.initDelay();
        });
    };
    /**
     * 添加编辑器事件
     */
    UEditorComponent.prototype.addListener = function (eventName, fn) {
        if (this.events[eventName])
            return;
        this.events[eventName] = fn;
        this.instance.addListener(eventName, fn);
    };
    /**
     * 移除编辑器事件
     */
    UEditorComponent.prototype.removeListener = function (eventName) {
        if (!this.events[eventName])
            return;
        this.instance.removeListener(eventName, this.events[eventName]);
        delete this.events[eventName];
    };
    UEditorComponent.prototype.ngOnDestroy = function () {
        this.destroy();
    };
    // reuse-tab: http://ng-alain.com/components/reuse-tab#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F
    UEditorComponent.prototype._onReuseInit = function () {
        this.destroy();
        this.initDelay();
    };
    UEditorComponent.prototype.writeValue = function (value) {
        this.value = value;
        if (this.instance) {
            this.instance.setContent(this.value);
        }
    };
    UEditorComponent.prototype.registerOnChange = function (fn) {
        this.onChange = fn;
    };
    UEditorComponent.prototype.registerOnTouched = function (fn) {
        this.onTouched = fn;
    };
    UEditorComponent.prototype.setDisabledState = function (isDisabled) {
        this.disabled = isDisabled;
        this.setDisabled();
    };
    UEditorComponent.decorators = [
        { type: Component, args: [{
                    selector: 'ueditor',
                    template: "\n  <textarea id=\"{{id}}\" class=\"ueditor-textarea\"></textarea>\n  <div *ngIf=\"loading\" class=\"loading\" [innerHTML]=\"loadingTip\"></div>\n  ",
                    preserveWhitespaces: false,
                    providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(function () { return UEditorComponent; }),
                            multi: true,
                        },
                    ],
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    styles: ["\n      :host {\n        line-height: initial;\n      }\n      :host .ueditor-textarea {\n        display: none;\n      }\n    "]
                }] }
    ];
    /** @nocollapse */
    UEditorComponent.ctorParameters = function () { return [
        { type: ScriptService },
        { type: UEditorConfig },
        { type: ChangeDetectorRef },
        { type: NgZone }
    ]; };
    UEditorComponent.propDecorators = {
        config: [{ type: Input }],
        loadingTip: [{ type: Input }],
        disabled: [{ type: Input }],
        delay: [{ type: Input }],
        onPreReady: [{ type: Output }],
        onReady: [{ type: Output }],
        onDestroy: [{ type: Output }]
    };
    return UEditorComponent;
}());

var UEditorModule = /** @class */ (function () {
    function UEditorModule() {
    }
    UEditorModule.forRoot = function (config) {
        return {
            ngModule: UEditorModule,
            providers: [{ provide: UEditorConfig, useValue: config }],
        };
    };
    UEditorModule.decorators = [
        { type: NgModule, args: [{
                    imports: [CommonModule],
                    providers: [ScriptService],
                    declarations: [UEditorComponent],
                    exports: [UEditorComponent],
                },] }
    ];
    return UEditorModule;
}());

/**
 * Generated bundle index. Do not edit.
 */

export { ScriptService as ɵa, UEditorComponent, UEditorConfig, UEditorModule };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXVlZGl0b3IuanMubWFwIiwic291cmNlcyI6WyJuZzovL25neC11ZWRpdG9yL3NyYy9zY3JpcHQuc2VydmljZS50cyIsIm5nOi8vbmd4LXVlZGl0b3Ivc3JjL3VlZGl0b3IuY29uZmlnLnRzIiwibmc6Ly9uZ3gtdWVkaXRvci9zcmMvdWVkaXRvci5jb21wb25lbnQudHMiLCJuZzovL25neC11ZWRpdG9yL3NyYy91ZWRpdG9yLm1vZHVsZS50cyIsIm5nOi8vbmd4LXVlZGl0b3Ivbmd4LXVlZGl0b3IudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSwgSW5qZWN0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IERPQ1VNRU5UIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcclxuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgU2NyaXB0U2VydmljZSB7XHJcbiAgcHJpdmF0ZSBsb2FkZWQgPSBmYWxzZTtcclxuICBwcml2YXRlIGxpc3Q6IGFueSA9IHt9O1xyXG4gIHByaXZhdGUgZW1pdHRlcjogU3ViamVjdDxib29sZWFuPiA9IG5ldyBTdWJqZWN0PGJvb2xlYW4+KCk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKEBJbmplY3QoRE9DVU1FTlQpIHByaXZhdGUgZG9jOiBhbnkpIHt9XHJcblxyXG4gIGdldENoYW5nZUVtaXR0ZXIoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5lbWl0dGVyO1xyXG4gIH1cclxuXHJcbiAgbG9hZChwYXRoOiBzdHJpbmdbXSkge1xyXG4gICAgaWYgKHRoaXMubG9hZGVkKSByZXR1cm4gdGhpcztcclxuXHJcbiAgICB0aGlzLmxvYWRlZCA9IHRydWU7XHJcblxyXG4gICAgY29uc3QgcHJvbWlzZXM6IFByb21pc2U8YW55PltdID0gW107XHJcblxyXG4gICAgcGF0aC5mb3JFYWNoKHNjcmlwdCA9PiBwcm9taXNlcy5wdXNoKHRoaXMubG9hZFNjcmlwdChzY3JpcHQpKSk7XHJcblxyXG4gICAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKCkgPT4gdGhpcy5lbWl0dGVyLm5leHQodHJ1ZSkpO1xyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgbG9hZFNjcmlwdChwYXRoOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgaWYgKHRoaXMubGlzdFtwYXRoXSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIHJlc29sdmUoPGFueT57XHJcbiAgICAgICAgICBwYXRoOiBwYXRoLFxyXG4gICAgICAgICAgbG9hZGVkOiB0cnVlLFxyXG4gICAgICAgICAgc3RhdHVzOiAnTG9hZGVkJyxcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMubGlzdFtwYXRoXSA9IHRydWU7XHJcblxyXG4gICAgICBjb25zdCBub2RlID0gdGhpcy5kb2MuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAgIG5vZGUudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xyXG4gICAgICBub2RlLnNyYyA9IHBhdGg7XHJcbiAgICAgIG5vZGUuY2hhcnNldCA9ICd1dGYtOCc7XHJcbiAgICAgIGlmIChub2RlLnJlYWR5U3RhdGUpIHtcclxuICAgICAgICAvLyBJRVxyXG4gICAgICAgIG5vZGUub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xyXG4gICAgICAgICAgaWYgKG5vZGUucmVhZHlTdGF0ZSA9PT0gJ2xvYWRlZCcgfHwgbm9kZS5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XHJcbiAgICAgICAgICAgIG5vZGUub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcclxuICAgICAgICAgICAgcmVzb2x2ZSg8YW55PntcclxuICAgICAgICAgICAgICBwYXRoOiBwYXRoLFxyXG4gICAgICAgICAgICAgIGxvYWRlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICBzdGF0dXM6ICdMb2FkZWQnLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIG5vZGUub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgICAgcmVzb2x2ZSg8YW55PntcclxuICAgICAgICAgICAgcGF0aDogcGF0aCxcclxuICAgICAgICAgICAgbG9hZGVkOiB0cnVlLFxyXG4gICAgICAgICAgICBzdGF0dXM6ICdMb2FkZWQnLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgICBub2RlLm9uZXJyb3IgPSAoKSA9PlxyXG4gICAgICAgIHJlc29sdmUoPGFueT57XHJcbiAgICAgICAgICBwYXRoOiBwYXRoLFxyXG4gICAgICAgICAgbG9hZGVkOiBmYWxzZSxcclxuICAgICAgICAgIHN0YXR1czogJ0xvYWRlZCcsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIHRoaXMuZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0uYXBwZW5kQ2hpbGQobm9kZSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGludGVyZmFjZSBVRWRpdG9yT3B0aW9ucyB7XHJcbiAgW2tleTogc3RyaW5nXTogYW55O1xyXG4gIC8qKiDDpcK9wpPDpMK9wqDDpMK9wr/Dp8KUwqggYGNkbmAgw6bCl8K2w6/CvMKMw6XCscKew6bCgMKnw6XCv8KFw6XCocKrw6/CvMKMw6fCm8K4w6XCvcKTw6TCusKOw6bClcK0w6TCuMKqIFVlZGl0b3Igw6bCicKAw6nCnMKAw6jCpsKBw6jCr8Ktw6jCqMKAw6PCgMKBw6TCuMK7w6nCosKYw6PCgMKBw6XCr8K5w6jCr8Kdw6bCocKGw6fCrcKJw6bCoMK5w6jCt8Kvw6XCvsKEICovXHJcbiAgVUVESVRPUl9IT01FX1VSTDogc3RyaW5nO1xyXG4gIC8qKiDDpsKcwo3DpcKKwqHDpcKZwqjDp8K7wp/DpMK4woDDqMKvwrfDpsKxwoLDpsKOwqXDpcKPwqPDqMK3wq/DpcK+woQgKi9cclxuICBzZXJ2ZXJVcmw/OiBzdHJpbmc7XHJcbiAgLyoqIMOlwrfCpcOlwoXCt8OmwqDCj8OkwrjCisOnwprChMOmwonCgMOmwpzCicOnwprChMOlworCn8OowoPCvcOmwozCicOpwpLCrsOlwpLCjMOkwrjCi8OmwovCicOmwqHChsOvwrzCjMOlwo/Cr8OkwrvCpcOlwpzCqG5ld8OnwrzClsOowr7CkcOlwpnCqMOnwprChMOlwq7CnsOkwr7Ci8OmwpfCtsOpwoDCicOmwovCqcOowofCqsOlwrfCscOpwpzCgMOowqbCgcOnwprChMOkwrvCjsOmwpbCsMOlwq7CmsOkwrnCiSAqL1xyXG4gIHRvb2xiYXJzPzogc3RyaW5nW11bXTtcclxuICAvKiogw6fCvMKWw6jCvsKRw6XCmcKow6XCscKCw6fCusKnw6fCmsKEw6XCn8K6w6bClcKwLMOpwrvCmMOowq7CpCBgOTAwYCAqL1xyXG4gIHpJbmRleD86IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFVFZGl0b3JDb25maWcge1xyXG4gIC8qKlxyXG4gICAqIFVlZGl0b3IgW8OlwonCjcOnwqvCr8OpwoXCjcOnwr3CrsOpwqHCuV0oaHR0cDovL2ZleC5iYWlkdS5jb20vdWVkaXRvci8jc3RhcnQtY29uZmlnKVxyXG4gICAqL1xyXG4gIG9wdGlvbnM6IFVFZGl0b3JPcHRpb25zO1xyXG5cclxuICAvKipcclxuICAgKiDDpsKMwofDpcKuwpp1ZWRpdG9yLmpzw6XCksKMY29uZmlnLmpzw6jCt8Kvw6XCvsKEw6/CvMKMw6jCv8KZw6bCmMKvw6XCkMKvw6XCisKoIFVlZGl0b3Igw6XCv8KFw6XCpMKHXHJcbiAgICogLSAqKsOlworCocOlwr/ChSoqw6bCjMKHw6XCrsKaIGBvcHRpb25zLlVFRElUT1JfSE9NRV9VUkxgw6/CvMKIw6jCmcK9w6fChMK2w6nCu8KYw6jCrsKkw6TCvMKaw6bCoMK5w6bCjcKuIGBjb25maWcuanNgIMOowrfCr8Olwr7ChMOowo7Ct8Olwo/ClsOvwrzCjMOkwr3ChsOmwp/CkMOkwrrCm8Onwo7Cr8OlwqLCg8OkwrjCi8OmwpvCtMOmwpzCicOkwr/CncOowq/CgcOvwrzCiVxyXG4gICAqL1xyXG4gIGpzOiBzdHJpbmdbXTtcclxuXHJcbiAgLyoqXHJcbiAgICogSG9va1xyXG4gICAqIC0gw6XCnMKoIFVlZGl0b3Igw6XCr8K5w6jCscKhw6XCisKgw6jCvcK9w6XCrsKMw6bCiMKQw6XCkMKOw6bCicKnw6jCocKMXHJcbiAgICogLSDDpcKPwqrDpsKJwqfDqMKhwozDpMK4woDDpsKswqFcclxuICAgKi9cclxuICBob29rPzogKHVlOiBhbnkpID0+IHZvaWQ7XHJcbn1cclxuIiwiaW1wb3J0IHtcclxuICBDb21wb25lbnQsXHJcbiAgSW5wdXQsXHJcbiAgZm9yd2FyZFJlZixcclxuICBPbkRlc3Ryb3ksXHJcbiAgRXZlbnRFbWl0dGVyLFxyXG4gIE91dHB1dCxcclxuICBPbkluaXQsXHJcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXHJcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgQWZ0ZXJWaWV3SW5pdCxcclxuICBPbkNoYW5nZXMsXHJcbiAgU2ltcGxlQ2hhbmdlcyxcclxuICBOZ1pvbmUsXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE5HX1ZBTFVFX0FDQ0VTU09SLCBDb250cm9sVmFsdWVBY2Nlc3NvciB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuXHJcbmltcG9ydCB7IFNjcmlwdFNlcnZpY2UgfSBmcm9tICcuL3NjcmlwdC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgVUVkaXRvckNvbmZpZyB9IGZyb20gJy4vdWVkaXRvci5jb25maWcnO1xyXG5cclxuZGVjbGFyZSBjb25zdCB3aW5kb3c6IGFueTtcclxuZGVjbGFyZSBjb25zdCBVRTogYW55O1xyXG5sZXQgX2hvb2tfZmluaXNoZWQgPSBmYWxzZTtcclxuXHJcbmV4cG9ydCB0eXBlIEV2ZW50VHlwZXMgPVxyXG4gIHwgJ2Rlc3Ryb3knXHJcbiAgfCAncmVzZXQnXHJcbiAgfCAnZm9jdXMnXHJcbiAgfCAnbGFuZ1JlYWR5J1xyXG4gIHwgJ2JlZm9yZUV4ZWNDb21tYW5kJ1xyXG4gIHwgJ2FmdGVyRXhlY0NvbW1hbmQnXHJcbiAgfCAnZmlyc3RCZWZvcmVFeGVjQ29tbWFuZCdcclxuICB8ICdiZWZvcmVHZXRDb250ZW50J1xyXG4gIHwgJ2FmdGVyR2V0Q29udGVudCdcclxuICB8ICdnZXRBbGxIdG1sJ1xyXG4gIHwgJ2JlZm9yZVNldENvbnRlbnQnXHJcbiAgfCAnYWZ0ZXJTZXRDb250ZW50J1xyXG4gIHwgJ3NlbGVjdGlvbmNoYW5nZSdcclxuICB8ICdiZWZvcmVTZWxlY3Rpb25DaGFuZ2UnXHJcbiAgfCAnYWZ0ZXJTZWxlY3Rpb25DaGFuZ2UnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICd1ZWRpdG9yJyxcclxuICB0ZW1wbGF0ZTogYFxyXG4gIDx0ZXh0YXJlYSBpZD1cInt7aWR9fVwiIGNsYXNzPVwidWVkaXRvci10ZXh0YXJlYVwiPjwvdGV4dGFyZWE+XHJcbiAgPGRpdiAqbmdJZj1cImxvYWRpbmdcIiBjbGFzcz1cImxvYWRpbmdcIiBbaW5uZXJIVE1MXT1cImxvYWRpbmdUaXBcIj48L2Rpdj5cclxuICBgLFxyXG4gIHByZXNlcnZlV2hpdGVzcGFjZXM6IGZhbHNlLFxyXG4gIHN0eWxlczogW1xyXG4gICAgYFxyXG4gICAgICA6aG9zdCB7XHJcbiAgICAgICAgbGluZS1oZWlnaHQ6IGluaXRpYWw7XHJcbiAgICAgIH1cclxuICAgICAgOmhvc3QgLnVlZGl0b3ItdGV4dGFyZWEge1xyXG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XHJcbiAgICAgIH1cclxuICAgIGAsXHJcbiAgXSxcclxuICBwcm92aWRlcnM6IFtcclxuICAgIHtcclxuICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXHJcbiAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IFVFZGl0b3JDb21wb25lbnQpLFxyXG4gICAgICBtdWx0aTogdHJ1ZSxcclxuICAgIH0sXHJcbiAgXSxcclxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcclxufSlcclxuZXhwb3J0IGNsYXNzIFVFZGl0b3JDb21wb25lbnRcclxuICBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgT25DaGFuZ2VzLCBPbkRlc3Ryb3ksIENvbnRyb2xWYWx1ZUFjY2Vzc29yIHtcclxuICBwcml2YXRlIGluc3RhbmNlOiBhbnk7XHJcbiAgcHJpdmF0ZSB2YWx1ZTogc3RyaW5nO1xyXG4gIHByaXZhdGUgaW5pdGVkID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBldmVudHM6IGFueSA9IHt9O1xyXG5cclxuICBwcml2YXRlIG9uQ2hhbmdlOiAodmFsdWU6IHN0cmluZykgPT4gdm9pZDtcclxuICBwcml2YXRlIG9uVG91Y2hlZDogKCkgPT4gdm9pZDtcclxuXHJcbiAgbG9hZGluZyA9IHRydWU7XHJcbiAgaWQgPSBgX3VlZGl0b3ItJHtNYXRoLnJhbmRvbSgpXHJcbiAgICAudG9TdHJpbmcoMzYpXHJcbiAgICAuc3Vic3RyaW5nKDIpfWA7XHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgY29uZmlnOiBhbnk7XHJcbiAgQElucHV0KClcclxuICBsb2FkaW5nVGlwID0gJ8OlworCoMOowr3CvcOkwrjCrS4uLic7XHJcbiAgQElucHV0KClcclxuICBzZXQgZGlzYWJsZWQodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgIHRoaXMuX2Rpc2FibGVkID0gdmFsdWU7XHJcbiAgICB0aGlzLnNldERpc2FibGVkKCk7XHJcbiAgfVxyXG4gIHByaXZhdGUgX2Rpc2FibGVkID0gZmFsc2U7XHJcblxyXG4gIC8qKiDDpcK7wrbDqMK/wp/DpcKIwp3DpcKnwovDpcKMwpYgKi9cclxuICBASW5wdXQoKVxyXG4gIGRlbGF5ID0gNTA7XHJcblxyXG4gIEBPdXRwdXQoKVxyXG4gIHJlYWRvbmx5IG9uUHJlUmVhZHkgPSBuZXcgRXZlbnRFbWl0dGVyPFVFZGl0b3JDb21wb25lbnQ+KCk7XHJcbiAgQE91dHB1dCgpXHJcbiAgcmVhZG9ubHkgb25SZWFkeSA9IG5ldyBFdmVudEVtaXR0ZXI8VUVkaXRvckNvbXBvbmVudD4oKTtcclxuICBAT3V0cHV0KClcclxuICByZWFkb25seSBvbkRlc3Ryb3kgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSBzczogU2NyaXB0U2VydmljZSxcclxuICAgIHByaXZhdGUgY29nOiBVRWRpdG9yQ29uZmlnLFxyXG4gICAgcHJpdmF0ZSBjZDogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICBwcml2YXRlIHpvbmU6IE5nWm9uZSxcclxuICApIHt9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5pbml0ZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xyXG4gICAgLy8gw6XCt8Kyw6fCu8KPw6XCrcKYw6XCnMKow6XCr8K5w6jCscKhw6bCl8Kgw6nCocK7w6jCv8Kbw6XChcKlw6bCh8KSw6XCisKgw6jCvcK9w6bCqMKhw6XCvMKPXHJcbiAgICBpZiAod2luZG93LlVFKSB7XHJcbiAgICAgIHRoaXMuaW5pdERlbGF5KCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNzXHJcbiAgICAgIC5sb2FkKHRoaXMuY29nLmpzKVxyXG4gICAgICAuZ2V0Q2hhbmdlRW1pdHRlcigpXHJcbiAgICAgIC5zdWJzY3JpYmUocmVzID0+IHtcclxuICAgICAgICB0aGlzLmluaXREZWxheSgpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLmluaXRlZCAmJiBjaGFuZ2VzLmNvbmZpZykge1xyXG4gICAgICB0aGlzLmRlc3Ryb3koKTtcclxuICAgICAgdGhpcy5pbml0RGVsYXkoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgaW5pdERlbGF5KCkge1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmluaXQoKSwgdGhpcy5kZWxheSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGluaXQoKSB7XHJcbiAgICBpZiAoIXdpbmRvdy5VRSkgdGhyb3cgbmV3IEVycm9yKCd1ZWRpdG8ganPDpsKWwofDpMK7wrbDpcKKwqDDqMK9wr3DpcKkwrHDqMK0wqUnKTtcclxuXHJcbiAgICBpZiAodGhpcy5pbnN0YW5jZSkgcmV0dXJuO1xyXG5cclxuICAgIC8vIHJlZ2lzdHJlciBob29rXHJcbiAgICBpZiAodGhpcy5jb2cuaG9vayAmJiAhX2hvb2tfZmluaXNoZWQpIHtcclxuICAgICAgX2hvb2tfZmluaXNoZWQgPSB0cnVlO1xyXG4gICAgICB0aGlzLmNvZy5ob29rKFVFKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm9uUHJlUmVhZHkuZW1pdCh0aGlzKTtcclxuXHJcbiAgICBjb25zdCBvcHQgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmNvZy5vcHRpb25zLCB0aGlzLmNvbmZpZyk7XHJcblxyXG4gICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgY29uc3QgdWVkaXRvciA9IFVFLmdldEVkaXRvcih0aGlzLmlkLCBvcHQpO1xyXG4gICAgICB1ZWRpdG9yLnJlYWR5KCgpID0+IHtcclxuICAgICAgICB0aGlzLmluc3RhbmNlID0gdWVkaXRvcjtcclxuICAgICAgICBpZiAodGhpcy52YWx1ZSkgdGhpcy5pbnN0YW5jZS5zZXRDb250ZW50KHRoaXMudmFsdWUpO1xyXG4gICAgICAgIHRoaXMub25SZWFkeS5lbWl0KHRoaXMpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHVlZGl0b3IuYWRkTGlzdGVuZXIoJ2NvbnRlbnRDaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHVlZGl0b3IuZ2V0Q29udGVudCgpO1xyXG5cclxuICAgICAgICB0aGlzLnpvbmUucnVuKCgpID0+IHRoaXMub25DaGFuZ2UodGhpcy52YWx1ZSkpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZGVzdHJveSgpIHtcclxuICAgIGlmICh0aGlzLmluc3RhbmNlKSB7XHJcbiAgICAgIHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5ldmVudHMpLmZvckVhY2gobmFtZSA9PlxyXG4gICAgICAgICAgdGhpcy5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihuYW1lLCB0aGlzLmV2ZW50c1tuYW1lXSksXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKCdyZWFkeScpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoJ2NvbnRlbnRDaGFuZ2UnKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlLmRlc3Ryb3koKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlID0gbnVsbDtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLm9uRGVzdHJveS5lbWl0KCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldERpc2FibGVkKCkge1xyXG4gICAgaWYgKCF0aGlzLmluc3RhbmNlKSByZXR1cm47XHJcbiAgICBpZiAodGhpcy5fZGlzYWJsZWQpIHtcclxuICAgICAgdGhpcy5pbnN0YW5jZS5zZXREaXNhYmxlZCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5pbnN0YW5jZS5zZXRFbmFibGVkKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDDqMKOwrfDpcKPwpZVRcOlwq7CnsOkwr7Ci1xyXG4gICAqXHJcbiAgICogQHJlYWRvbmx5XHJcbiAgICovXHJcbiAgZ2V0IEluc3RhbmNlKCk6IGFueSB7XHJcbiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIMOowq7CvsOnwr3CrsOnwrzClsOowr7CkcOlwpnCqMOowq/CrcOowqjCgFxyXG4gICAqL1xyXG4gIHNldExhbmd1YWdlKGxhbmc6ICd6aC1jbicgfCAnZW4nKSB7XHJcbiAgICB0aGlzLnNzXHJcbiAgICAgIC5sb2FkU2NyaXB0KFxyXG4gICAgICAgIGAke3RoaXMuY29nLm9wdGlvbnMuVUVESVRPUl9IT01FX1VSTH0vbGFuZy8ke2xhbmd9LyR7bGFuZ30uanNgLFxyXG4gICAgICApXHJcbiAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgdGhpcy5kZXN0cm95KCk7XHJcblxyXG4gICAgICAgIC8vIMOmwrjChcOnwqnCusOowq/CrcOowqjCgFxyXG4gICAgICAgIGlmICghVUUuX2Jha19JMThOKSB7XHJcbiAgICAgICAgICBVRS5fYmFrX0kxOE4gPSBVRS5JMThOO1xyXG4gICAgICAgIH1cclxuICAgICAgICBVRS5JMThOID0ge307XHJcbiAgICAgICAgVUUuSTE4TltsYW5nXSA9IFVFLl9iYWtfSTE4TltsYW5nXTtcclxuXHJcbiAgICAgICAgdGhpcy5pbml0RGVsYXkoKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDDpsK3wrvDpcKKwqDDp8K8wpbDqMK+wpHDpcKZwqjDpMK6wovDpMK7wrZcclxuICAgKi9cclxuICBhZGRMaXN0ZW5lcihldmVudE5hbWU6IEV2ZW50VHlwZXMsIGZuOiBGdW5jdGlvbik6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuZXZlbnRzW2V2ZW50TmFtZV0pIHJldHVybjtcclxuICAgIHRoaXMuZXZlbnRzW2V2ZW50TmFtZV0gPSBmbjtcclxuICAgIHRoaXMuaW5zdGFuY2UuYWRkTGlzdGVuZXIoZXZlbnROYW1lLCBmbik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDDp8KnwrvDqcKZwqTDp8K8wpbDqMK+wpHDpcKZwqjDpMK6wovDpMK7wrZcclxuICAgKi9cclxuICByZW1vdmVMaXN0ZW5lcihldmVudE5hbWU6IEV2ZW50VHlwZXMpOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5ldmVudHNbZXZlbnROYW1lXSkgcmV0dXJuO1xyXG4gICAgdGhpcy5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihldmVudE5hbWUsIHRoaXMuZXZlbnRzW2V2ZW50TmFtZV0pO1xyXG4gICAgZGVsZXRlIHRoaXMuZXZlbnRzW2V2ZW50TmFtZV07XHJcbiAgfVxyXG5cclxuICBuZ09uRGVzdHJveSgpIHtcclxuICAgIHRoaXMuZGVzdHJveSgpO1xyXG4gIH1cclxuXHJcbiAgLy8gcmV1c2UtdGFiOiBodHRwOi8vbmctYWxhaW4uY29tL2NvbXBvbmVudHMvcmV1c2UtdGFiIyVFNyU5NCU5RiVFNSU5MSVCRCVFNSU5MSVBOCVFNiU5QyU5RlxyXG4gIF9vblJldXNlSW5pdCgpIHtcclxuICAgIHRoaXMuZGVzdHJveSgpO1xyXG4gICAgdGhpcy5pbml0RGVsYXkoKTtcclxuICB9XHJcblxyXG4gIHdyaXRlVmFsdWUodmFsdWU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgaWYgKHRoaXMuaW5zdGFuY2UpIHtcclxuICAgICAgdGhpcy5pbnN0YW5jZS5zZXRDb250ZW50KHRoaXMudmFsdWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVnaXN0ZXJPbkNoYW5nZShmbjogKF86IGFueSkgPT4ge30pOiB2b2lkIHtcclxuICAgIHRoaXMub25DaGFuZ2UgPSBmbjtcclxuICB9XHJcbiAgcmVnaXN0ZXJPblRvdWNoZWQoZm46ICgpID0+IHt9KTogdm9pZCB7XHJcbiAgICB0aGlzLm9uVG91Y2hlZCA9IGZuO1xyXG4gIH1cclxuXHJcbiAgc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICB0aGlzLmRpc2FibGVkID0gaXNEaXNhYmxlZDtcclxuICAgIHRoaXMuc2V0RGlzYWJsZWQoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcclxuaW1wb3J0IHsgTmdNb2R1bGUsIE1vZHVsZVdpdGhQcm92aWRlcnMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbmltcG9ydCB7IFVFZGl0b3JDb21wb25lbnQgfSBmcm9tICcuL3VlZGl0b3IuY29tcG9uZW50JztcclxuaW1wb3J0IHsgVUVkaXRvckNvbmZpZyB9IGZyb20gJy4vdWVkaXRvci5jb25maWcnO1xyXG5pbXBvcnQgeyBTY3JpcHRTZXJ2aWNlIH0gZnJvbSAnLi9zY3JpcHQuc2VydmljZSc7XHJcblxyXG5ATmdNb2R1bGUoe1xyXG4gIGltcG9ydHM6IFtDb21tb25Nb2R1bGVdLFxyXG4gIHByb3ZpZGVyczogW1NjcmlwdFNlcnZpY2VdLFxyXG4gIGRlY2xhcmF0aW9uczogW1VFZGl0b3JDb21wb25lbnRdLFxyXG4gIGV4cG9ydHM6IFtVRWRpdG9yQ29tcG9uZW50XSxcclxufSlcclxuZXhwb3J0IGNsYXNzIFVFZGl0b3JNb2R1bGUge1xyXG4gIHN0YXRpYyBmb3JSb290KGNvbmZpZzogVUVkaXRvckNvbmZpZyk6IE1vZHVsZVdpdGhQcm92aWRlcnMge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmdNb2R1bGU6IFVFZGl0b3JNb2R1bGUsXHJcbiAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogVUVkaXRvckNvbmZpZywgdXNlVmFsdWU6IGNvbmZpZyB9XSxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcbiIsIi8qKlxuICogR2VuZXJhdGVkIGJ1bmRsZSBpbmRleC4gRG8gbm90IGVkaXQuXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9pbmRleCc7XG5cbmV4cG9ydCB7U2NyaXB0U2VydmljZSBhcyDDicK1YX0gZnJvbSAnLi9zcmMvc2NyaXB0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