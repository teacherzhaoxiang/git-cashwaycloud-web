(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@angular/common'), require('rxjs'), require('@angular/forms')) :
    typeof define === 'function' && define.amd ? define('ngx-ueditor', ['exports', '@angular/core', '@angular/common', 'rxjs', '@angular/forms'], factory) :
    (factory((global['ngx-ueditor'] = {}),global.ng.core,global.ng.common,global.rxjs,global.ng.forms));
}(this, (function (exports,core,common,rxjs,forms) { 'use strict';

    var ScriptService = /** @class */ (function () {
        function ScriptService(doc) {
            this.doc = doc;
            this.loaded = false;
            this.list = {};
            this.emitter = new rxjs.Subject();
        }
        ScriptService.prototype.getChangeEmitter = function () {
            return this.emitter;
        };
        ScriptService.prototype.load = function (path) {
            var _this = this;
            if (this.loaded)
                return this;
            this.loaded = true;
            var promises = [];
            path.forEach(function (script) { return promises.push(_this.loadScript(script)); });
            Promise.all(promises).then(function () { return _this.emitter.next(true); });
            return this;
        };
        ScriptService.prototype.loadScript = function (path) {
            var _this = this;
            return new Promise(function (resolve, reject) {
                if (_this.list[path] === true) {
                    resolve({
                        path: path,
                        loaded: true,
                        status: 'Loaded',
                    });
                    return;
                }
                _this.list[path] = true;
                var node = _this.doc.createElement('script');
                node.type = 'text/javascript';
                node.src = path;
                node.charset = 'utf-8';
                if (node.readyState) {
                    // IE
                    node.onreadystatechange = function () {
                        if (node.readyState === 'loaded' || node.readyState === 'complete') {
                            node.onreadystatechange = null;
                            resolve({
                                path: path,
                                loaded: true,
                                status: 'Loaded',
                            });
                        }
                    };
                }
                else {
                    node.onload = function () {
                        resolve({
                            path: path,
                            loaded: true,
                            status: 'Loaded',
                        });
                    };
                }
                node.onerror = function () {
                    return resolve({
                        path: path,
                        loaded: false,
                        status: 'Loaded',
                    });
                };
                _this.doc.getElementsByTagName('head')[0].appendChild(node);
            });
        };
        ScriptService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        ScriptService.ctorParameters = function () {
            return [
                { type: undefined, decorators: [{ type: core.Inject, args: [common.DOCUMENT,] }] }
            ];
        };
        return ScriptService;
    }());

    var UEditorConfig = /** @class */ (function () {
        function UEditorConfig() {
        }
        return UEditorConfig;
    }());

    var _hook_finished = false;
    var UEditorComponent = /** @class */ (function () {
        function UEditorComponent(ss, cog, cd, zone) {
            this.ss = ss;
            this.cog = cog;
            this.cd = cd;
            this.zone = zone;
            this.inited = false;
            this.events = {};
            this.loading = true;
            this.id = "_ueditor-" + Math.random()
                .toString(36)
                .substring(2);
            this.loadingTip = '加载中...';
            this._disabled = false;
            /** 延迟初始化 */
            this.delay = 50;
            this.onPreReady = new core.EventEmitter();
            this.onReady = new core.EventEmitter();
            this.onDestroy = new core.EventEmitter();
        }
        Object.defineProperty(UEditorComponent.prototype, "disabled", {
            set: function (value) {
                this._disabled = value;
                this.setDisabled();
            },
            enumerable: true,
            configurable: true
        });
        UEditorComponent.prototype.ngOnInit = function () {
            this.inited = true;
        };
        UEditorComponent.prototype.ngAfterViewInit = function () {
            var _this = this;
            // 已经存在对象无须进入懒加载模式
            if (window.UE) {
                this.initDelay();
                return;
            }
            this.ss
                .load(this.cog.js)
                .getChangeEmitter()
                .subscribe(function (res) {
                _this.initDelay();
            });
        };
        UEditorComponent.prototype.ngOnChanges = function (changes) {
            if (this.inited && changes.config) {
                this.destroy();
                this.initDelay();
            }
        };
        UEditorComponent.prototype.initDelay = function () {
            var _this = this;
            setTimeout(function () { return _this.init(); }, this.delay);
        };
        UEditorComponent.prototype.init = function () {
            var _this = this;
            if (!window.UE)
                throw new Error('uedito js文件加载失败');
            if (this.instance)
                return;
            // registrer hook
            if (this.cog.hook && !_hook_finished) {
                _hook_finished = true;
                this.cog.hook(UE);
            }
            this.onPreReady.emit(this);
            var opt = Object.assign({}, this.cog.options, this.config);
            this.zone.runOutsideAngular(function () {
                var ueditor = UE.getEditor(_this.id, opt);
                ueditor.ready(function () {
                    _this.instance = ueditor;
                    if (_this.value)
                        _this.instance.setContent(_this.value);
                    _this.onReady.emit(_this);
                });
                ueditor.addListener('contentChange', function () {
                    _this.value = ueditor.getContent();
                    _this.zone.run(function () { return _this.onChange(_this.value); });
                });
            });
            this.loading = false;
            this.cd.detectChanges();
        };
        UEditorComponent.prototype.destroy = function () {
            var _this = this;
            if (this.instance) {
                this.zone.runOutsideAngular(function () {
                    Object.keys(_this.events).forEach(function (name) {
                        return _this.instance.removeListener(name, _this.events[name]);
                    });
                    _this.instance.removeListener('ready');
                    _this.instance.removeListener('contentChange');
                    _this.instance.destroy();
                    _this.instance = null;
                });
            }
            this.onDestroy.emit();
        };
        UEditorComponent.prototype.setDisabled = function () {
            if (!this.instance)
                return;
            if (this._disabled) {
                this.instance.setDisabled();
            }
            else {
                this.instance.setEnabled();
            }
        };
        Object.defineProperty(UEditorComponent.prototype, "Instance", {
            /**
             * 获取UE实例
             *
             * @readonly
             */
            get: function () {
                return this.instance;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * 设置编辑器语言
         */
        UEditorComponent.prototype.setLanguage = function (lang) {
            var _this = this;
            this.ss
                .loadScript(this.cog.options.UEDITOR_HOME_URL + "/lang/" + lang + "/" + lang + ".js")
                .then(function (res) {
                _this.destroy();
                // 清空语言
                if (!UE._bak_I18N) {
                    UE._bak_I18N = UE.I18N;
                }
                UE.I18N = {};
                UE.I18N[lang] = UE._bak_I18N[lang];
                _this.initDelay();
            });
        };
        /**
         * 添加编辑器事件
         */
        UEditorComponent.prototype.addListener = function (eventName, fn) {
            if (this.events[eventName])
                return;
            this.events[eventName] = fn;
            this.instance.addListener(eventName, fn);
        };
        /**
         * 移除编辑器事件
         */
        UEditorComponent.prototype.removeListener = function (eventName) {
            if (!this.events[eventName])
                return;
            this.instance.removeListener(eventName, this.events[eventName]);
            delete this.events[eventName];
        };
        UEditorComponent.prototype.ngOnDestroy = function () {
            this.destroy();
        };
        // reuse-tab: http://ng-alain.com/components/reuse-tab#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F
        UEditorComponent.prototype._onReuseInit = function () {
            this.destroy();
            this.initDelay();
        };
        UEditorComponent.prototype.writeValue = function (value) {
            this.value = value;
            if (this.instance) {
                this.instance.setContent(this.value);
            }
        };
        UEditorComponent.prototype.registerOnChange = function (fn) {
            this.onChange = fn;
        };
        UEditorComponent.prototype.registerOnTouched = function (fn) {
            this.onTouched = fn;
        };
        UEditorComponent.prototype.setDisabledState = function (isDisabled) {
            this.disabled = isDisabled;
            this.setDisabled();
        };
        UEditorComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'ueditor',
                        template: "\n  <textarea id=\"{{id}}\" class=\"ueditor-textarea\"></textarea>\n  <div *ngIf=\"loading\" class=\"loading\" [innerHTML]=\"loadingTip\"></div>\n  ",
                        preserveWhitespaces: false,
                        providers: [
                            {
                                provide: forms.NG_VALUE_ACCESSOR,
                                useExisting: core.forwardRef(function () { return UEditorComponent; }),
                                multi: true,
                            },
                        ],
                        changeDetection: core.ChangeDetectionStrategy.OnPush,
                        styles: ["\n      :host {\n        line-height: initial;\n      }\n      :host .ueditor-textarea {\n        display: none;\n      }\n    "]
                    }] }
        ];
        /** @nocollapse */
        UEditorComponent.ctorParameters = function () {
            return [
                { type: ScriptService },
                { type: UEditorConfig },
                { type: core.ChangeDetectorRef },
                { type: core.NgZone }
            ];
        };
        UEditorComponent.propDecorators = {
            config: [{ type: core.Input }],
            loadingTip: [{ type: core.Input }],
            disabled: [{ type: core.Input }],
            delay: [{ type: core.Input }],
            onPreReady: [{ type: core.Output }],
            onReady: [{ type: core.Output }],
            onDestroy: [{ type: core.Output }]
        };
        return UEditorComponent;
    }());

    var UEditorModule = /** @class */ (function () {
        function UEditorModule() {
        }
        UEditorModule.forRoot = function (config) {
            return {
                ngModule: UEditorModule,
                providers: [{ provide: UEditorConfig, useValue: config }],
            };
        };
        UEditorModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule],
                        providers: [ScriptService],
                        declarations: [UEditorComponent],
                        exports: [UEditorComponent],
                    },] }
        ];
        return UEditorModule;
    }());

    /**
     * Generated bundle index. Do not edit.
     */

    exports.ɵa = ScriptService;
    exports.UEditorComponent = UEditorComponent;
    exports.UEditorConfig = UEditorConfig;
    exports.UEditorModule = UEditorModule;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXVlZGl0b3IudW1kLmpzLm1hcCIsInNvdXJjZXMiOlsibmc6Ly9uZ3gtdWVkaXRvci9zcmMvc2NyaXB0LnNlcnZpY2UudHMiLCJuZzovL25neC11ZWRpdG9yL3NyYy91ZWRpdG9yLmNvbmZpZy50cyIsIm5nOi8vbmd4LXVlZGl0b3Ivc3JjL3VlZGl0b3IuY29tcG9uZW50LnRzIiwibmc6Ly9uZ3gtdWVkaXRvci9zcmMvdWVkaXRvci5tb2R1bGUudHMiLCJuZzovL25neC11ZWRpdG9yL25neC11ZWRpdG9yLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUsIEluamVjdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBET0NVTUVOVCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XHJcbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdyeGpzJztcclxuXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIFNjcmlwdFNlcnZpY2Uge1xyXG4gIHByaXZhdGUgbG9hZGVkID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBsaXN0OiBhbnkgPSB7fTtcclxuICBwcml2YXRlIGVtaXR0ZXI6IFN1YmplY3Q8Ym9vbGVhbj4gPSBuZXcgU3ViamVjdDxib29sZWFuPigpO1xyXG5cclxuICBjb25zdHJ1Y3RvcihASW5qZWN0KERPQ1VNRU5UKSBwcml2YXRlIGRvYzogYW55KSB7fVxyXG5cclxuICBnZXRDaGFuZ2VFbWl0dGVyKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZW1pdHRlcjtcclxuICB9XHJcblxyXG4gIGxvYWQocGF0aDogc3RyaW5nW10pIHtcclxuICAgIGlmICh0aGlzLmxvYWRlZCkgcmV0dXJuIHRoaXM7XHJcblxyXG4gICAgdGhpcy5sb2FkZWQgPSB0cnVlO1xyXG5cclxuICAgIGNvbnN0IHByb21pc2VzOiBQcm9taXNlPGFueT5bXSA9IFtdO1xyXG5cclxuICAgIHBhdGguZm9yRWFjaChzY3JpcHQgPT4gcHJvbWlzZXMucHVzaCh0aGlzLmxvYWRTY3JpcHQoc2NyaXB0KSkpO1xyXG5cclxuICAgIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCgpID0+IHRoaXMuZW1pdHRlci5uZXh0KHRydWUpKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIGxvYWRTY3JpcHQocGF0aDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLmxpc3RbcGF0aF0gPT09IHRydWUpIHtcclxuICAgICAgICByZXNvbHZlKDxhbnk+e1xyXG4gICAgICAgICAgcGF0aDogcGF0aCxcclxuICAgICAgICAgIGxvYWRlZDogdHJ1ZSxcclxuICAgICAgICAgIHN0YXR1czogJ0xvYWRlZCcsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmxpc3RbcGF0aF0gPSB0cnVlO1xyXG5cclxuICAgICAgY29uc3Qgbm9kZSA9IHRoaXMuZG9jLmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgICBub2RlLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcclxuICAgICAgbm9kZS5zcmMgPSBwYXRoO1xyXG4gICAgICBub2RlLmNoYXJzZXQgPSAndXRmLTgnO1xyXG4gICAgICBpZiAobm9kZS5yZWFkeVN0YXRlKSB7XHJcbiAgICAgICAgLy8gSUVcclxuICAgICAgICBub2RlLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcclxuICAgICAgICAgIGlmIChub2RlLnJlYWR5U3RhdGUgPT09ICdsb2FkZWQnIHx8IG5vZGUucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xyXG4gICAgICAgICAgICBub2RlLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHJlc29sdmUoPGFueT57XHJcbiAgICAgICAgICAgICAgcGF0aDogcGF0aCxcclxuICAgICAgICAgICAgICBsb2FkZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgc3RhdHVzOiAnTG9hZGVkJyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBub2RlLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgIHJlc29sdmUoPGFueT57XHJcbiAgICAgICAgICAgIHBhdGg6IHBhdGgsXHJcbiAgICAgICAgICAgIGxvYWRlZDogdHJ1ZSxcclxuICAgICAgICAgICAgc3RhdHVzOiAnTG9hZGVkJyxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgICAgbm9kZS5vbmVycm9yID0gKCkgPT5cclxuICAgICAgICByZXNvbHZlKDxhbnk+e1xyXG4gICAgICAgICAgcGF0aDogcGF0aCxcclxuICAgICAgICAgIGxvYWRlZDogZmFsc2UsXHJcbiAgICAgICAgICBzdGF0dXM6ICdMb2FkZWQnLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB0aGlzLmRvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdLmFwcGVuZENoaWxkKG5vZGUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBpbnRlcmZhY2UgVUVkaXRvck9wdGlvbnMge1xyXG4gIFtrZXk6IHN0cmluZ106IGFueTtcclxuICAvKiogw6XCvcKTw6TCvcKgw6TCvcK/w6fClMKoIGBjZG5gIMOmwpfCtsOvwrzCjMOlwrHCnsOmwoDCp8Olwr/ChcOlwqHCq8OvwrzCjMOnwpvCuMOlwr3Ck8OkwrrCjsOmwpXCtMOkwrjCqiBVZWRpdG9yIMOmwonCgMOpwpzCgMOowqbCgcOowq/CrcOowqjCgMOjwoDCgcOkwrjCu8OpwqLCmMOjwoDCgcOlwq/CucOowq/CncOmwqHChsOnwq3CicOmwqDCucOowrfCr8Olwr7ChCAqL1xyXG4gIFVFRElUT1JfSE9NRV9VUkw6IHN0cmluZztcclxuICAvKiogw6bCnMKNw6XCisKhw6XCmcKow6fCu8Kfw6TCuMKAw6jCr8K3w6bCscKCw6bCjsKlw6XCj8Kjw6jCt8Kvw6XCvsKEICovXHJcbiAgc2VydmVyVXJsPzogc3RyaW5nO1xyXG4gIC8qKiDDpcK3wqXDpcKFwrfDpsKgwo/DpMK4worDp8KawoTDpsKJwoDDpsKcwonDp8KawoTDpcKKwp/DqMKDwr3DpsKMwonDqcKSwq7DpcKSwozDpMK4wovDpsKLwonDpsKhwobDr8K8wozDpcKPwq/DpMK7wqXDpcKcwqhuZXfDp8K8wpbDqMK+wpHDpcKZwqjDp8KawoTDpcKuwp7DpMK+wovDpsKXwrbDqcKAwonDpsKLwqnDqMKHwqrDpcK3wrHDqcKcwoDDqMKmwoHDp8KawoTDpMK7wo7DpsKWwrDDpcKuwprDpMK5wokgKi9cclxuICB0b29sYmFycz86IHN0cmluZ1tdW107XHJcbiAgLyoqIMOnwrzClsOowr7CkcOlwpnCqMOlwrHCgsOnwrrCp8OnwprChMOlwp/CusOmwpXCsCzDqcK7wpjDqMKuwqQgYDkwMGAgKi9cclxuICB6SW5kZXg/OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBVRWRpdG9yQ29uZmlnIHtcclxuICAvKipcclxuICAgKiBVZWRpdG9yIFvDpcKJwo3Dp8Krwq/DqcKFwo3Dp8K9wq7DqcKhwrldKGh0dHA6Ly9mZXguYmFpZHUuY29tL3VlZGl0b3IvI3N0YXJ0LWNvbmZpZylcclxuICAgKi9cclxuICBvcHRpb25zOiBVRWRpdG9yT3B0aW9ucztcclxuXHJcbiAgLyoqXHJcbiAgICogw6bCjMKHw6XCrsKadWVkaXRvci5qc8OlwpLCjGNvbmZpZy5qc8OowrfCr8Olwr7ChMOvwrzCjMOowr/CmcOmwpjCr8OlwpDCr8OlworCqCBVZWRpdG9yIMOlwr/ChcOlwqTCh1xyXG4gICAqIC0gKirDpcKKwqHDpcK/woUqKsOmwozCh8Olwq7CmiBgb3B0aW9ucy5VRURJVE9SX0hPTUVfVVJMYMOvwrzCiMOowpnCvcOnwoTCtsOpwrvCmMOowq7CpMOkwrzCmsOmwqDCucOmwo3CriBgY29uZmlnLmpzYCDDqMK3wq/DpcK+woTDqMKOwrfDpcKPwpbDr8K8wozDpMK9wobDpsKfwpDDpMK6wpvDp8KOwq/DpcKiwoPDpMK4wovDpsKbwrTDpsKcwonDpMK/wp3DqMKvwoHDr8K8wolcclxuICAgKi9cclxuICBqczogc3RyaW5nW107XHJcblxyXG4gIC8qKlxyXG4gICAqIEhvb2tcclxuICAgKiAtIMOlwpzCqCBVZWRpdG9yIMOlwq/CucOowrHCocOlworCoMOowr3CvcOlwq7CjMOmwojCkMOlwpDCjsOmwonCp8OowqHCjFxyXG4gICAqIC0gw6XCj8Kqw6bCicKnw6jCocKMw6TCuMKAw6bCrMKhXHJcbiAgICovXHJcbiAgaG9vaz86ICh1ZTogYW55KSA9PiB2b2lkO1xyXG59XHJcbiIsImltcG9ydCB7XHJcbiAgQ29tcG9uZW50LFxyXG4gIElucHV0LFxyXG4gIGZvcndhcmRSZWYsXHJcbiAgT25EZXN0cm95LFxyXG4gIEV2ZW50RW1pdHRlcixcclxuICBPdXRwdXQsXHJcbiAgT25Jbml0LFxyXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxyXG4gIENoYW5nZURldGVjdG9yUmVmLFxyXG4gIEFmdGVyVmlld0luaXQsXHJcbiAgT25DaGFuZ2VzLFxyXG4gIFNpbXBsZUNoYW5nZXMsXHJcbiAgTmdab25lLFxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBOR19WQUxVRV9BQ0NFU1NPUiwgQ29udHJvbFZhbHVlQWNjZXNzb3IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcblxyXG5pbXBvcnQgeyBTY3JpcHRTZXJ2aWNlIH0gZnJvbSAnLi9zY3JpcHQuc2VydmljZSc7XHJcbmltcG9ydCB7IFVFZGl0b3JDb25maWcgfSBmcm9tICcuL3VlZGl0b3IuY29uZmlnJztcclxuXHJcbmRlY2xhcmUgY29uc3Qgd2luZG93OiBhbnk7XHJcbmRlY2xhcmUgY29uc3QgVUU6IGFueTtcclxubGV0IF9ob29rX2ZpbmlzaGVkID0gZmFsc2U7XHJcblxyXG5leHBvcnQgdHlwZSBFdmVudFR5cGVzID1cclxuICB8ICdkZXN0cm95J1xyXG4gIHwgJ3Jlc2V0J1xyXG4gIHwgJ2ZvY3VzJ1xyXG4gIHwgJ2xhbmdSZWFkeSdcclxuICB8ICdiZWZvcmVFeGVjQ29tbWFuZCdcclxuICB8ICdhZnRlckV4ZWNDb21tYW5kJ1xyXG4gIHwgJ2ZpcnN0QmVmb3JlRXhlY0NvbW1hbmQnXHJcbiAgfCAnYmVmb3JlR2V0Q29udGVudCdcclxuICB8ICdhZnRlckdldENvbnRlbnQnXHJcbiAgfCAnZ2V0QWxsSHRtbCdcclxuICB8ICdiZWZvcmVTZXRDb250ZW50J1xyXG4gIHwgJ2FmdGVyU2V0Q29udGVudCdcclxuICB8ICdzZWxlY3Rpb25jaGFuZ2UnXHJcbiAgfCAnYmVmb3JlU2VsZWN0aW9uQ2hhbmdlJ1xyXG4gIHwgJ2FmdGVyU2VsZWN0aW9uQ2hhbmdlJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAndWVkaXRvcicsXHJcbiAgdGVtcGxhdGU6IGBcclxuICA8dGV4dGFyZWEgaWQ9XCJ7e2lkfX1cIiBjbGFzcz1cInVlZGl0b3ItdGV4dGFyZWFcIj48L3RleHRhcmVhPlxyXG4gIDxkaXYgKm5nSWY9XCJsb2FkaW5nXCIgY2xhc3M9XCJsb2FkaW5nXCIgW2lubmVySFRNTF09XCJsb2FkaW5nVGlwXCI+PC9kaXY+XHJcbiAgYCxcclxuICBwcmVzZXJ2ZVdoaXRlc3BhY2VzOiBmYWxzZSxcclxuICBzdHlsZXM6IFtcclxuICAgIGBcclxuICAgICAgOmhvc3Qge1xyXG4gICAgICAgIGxpbmUtaGVpZ2h0OiBpbml0aWFsO1xyXG4gICAgICB9XHJcbiAgICAgIDpob3N0IC51ZWRpdG9yLXRleHRhcmVhIHtcclxuICAgICAgICBkaXNwbGF5OiBub25lO1xyXG4gICAgICB9XHJcbiAgICBgLFxyXG4gIF0sXHJcbiAgcHJvdmlkZXJzOiBbXHJcbiAgICB7XHJcbiAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxyXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBVRWRpdG9yQ29tcG9uZW50KSxcclxuICAgICAgbXVsdGk6IHRydWUsXHJcbiAgICB9LFxyXG4gIF0sXHJcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBVRWRpdG9yQ29tcG9uZW50XHJcbiAgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQsIE9uQ2hhbmdlcywgT25EZXN0cm95LCBDb250cm9sVmFsdWVBY2Nlc3NvciB7XHJcbiAgcHJpdmF0ZSBpbnN0YW5jZTogYW55O1xyXG4gIHByaXZhdGUgdmFsdWU6IHN0cmluZztcclxuICBwcml2YXRlIGluaXRlZCA9IGZhbHNlO1xyXG4gIHByaXZhdGUgZXZlbnRzOiBhbnkgPSB7fTtcclxuXHJcbiAgcHJpdmF0ZSBvbkNoYW5nZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgcHJpdmF0ZSBvblRvdWNoZWQ6ICgpID0+IHZvaWQ7XHJcblxyXG4gIGxvYWRpbmcgPSB0cnVlO1xyXG4gIGlkID0gYF91ZWRpdG9yLSR7TWF0aC5yYW5kb20oKVxyXG4gICAgLnRvU3RyaW5nKDM2KVxyXG4gICAgLnN1YnN0cmluZygyKX1gO1xyXG5cclxuICBASW5wdXQoKVxyXG4gIGNvbmZpZzogYW55O1xyXG4gIEBJbnB1dCgpXHJcbiAgbG9hZGluZ1RpcCA9ICfDpcKKwqDDqMK9wr3DpMK4wq0uLi4nO1xyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IGRpc2FibGVkKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICB0aGlzLl9kaXNhYmxlZCA9IHZhbHVlO1xyXG4gICAgdGhpcy5zZXREaXNhYmxlZCgpO1xyXG4gIH1cclxuICBwcml2YXRlIF9kaXNhYmxlZCA9IGZhbHNlO1xyXG5cclxuICAvKiogw6XCu8K2w6jCv8Kfw6XCiMKdw6XCp8KLw6XCjMKWICovXHJcbiAgQElucHV0KClcclxuICBkZWxheSA9IDUwO1xyXG5cclxuICBAT3V0cHV0KClcclxuICByZWFkb25seSBvblByZVJlYWR5ID0gbmV3IEV2ZW50RW1pdHRlcjxVRWRpdG9yQ29tcG9uZW50PigpO1xyXG4gIEBPdXRwdXQoKVxyXG4gIHJlYWRvbmx5IG9uUmVhZHkgPSBuZXcgRXZlbnRFbWl0dGVyPFVFZGl0b3JDb21wb25lbnQ+KCk7XHJcbiAgQE91dHB1dCgpXHJcbiAgcmVhZG9ubHkgb25EZXN0cm95ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgc3M6IFNjcmlwdFNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGNvZzogVUVkaXRvckNvbmZpZyxcclxuICAgIHByaXZhdGUgY2Q6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgcHJpdmF0ZSB6b25lOiBOZ1pvbmUsXHJcbiAgKSB7fVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIHRoaXMuaW5pdGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcclxuICAgIC8vIMOlwrfCssOnwrvCj8Olwq3CmMOlwpzCqMOlwq/CucOowrHCocOmwpfCoMOpwqHCu8Oowr/Cm8OlwoXCpcOmwofCksOlworCoMOowr3CvcOmwqjCocOlwrzCj1xyXG4gICAgaWYgKHdpbmRvdy5VRSkge1xyXG4gICAgICB0aGlzLmluaXREZWxheSgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zc1xyXG4gICAgICAubG9hZCh0aGlzLmNvZy5qcylcclxuICAgICAgLmdldENoYW5nZUVtaXR0ZXIoKVxyXG4gICAgICAuc3Vic2NyaWJlKHJlcyA9PiB7XHJcbiAgICAgICAgdGhpcy5pbml0RGVsYXkoKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5pbml0ZWQgJiYgY2hhbmdlcy5jb25maWcpIHtcclxuICAgICAgdGhpcy5kZXN0cm95KCk7XHJcbiAgICAgIHRoaXMuaW5pdERlbGF5KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGluaXREZWxheSgpIHtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5pbml0KCksIHRoaXMuZGVsYXkpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpbml0KCkge1xyXG4gICAgaWYgKCF3aW5kb3cuVUUpIHRocm93IG5ldyBFcnJvcigndWVkaXRvIGpzw6bClsKHw6TCu8K2w6XCisKgw6jCvcK9w6XCpMKxw6jCtMKlJyk7XHJcblxyXG4gICAgaWYgKHRoaXMuaW5zdGFuY2UpIHJldHVybjtcclxuXHJcbiAgICAvLyByZWdpc3RyZXIgaG9va1xyXG4gICAgaWYgKHRoaXMuY29nLmhvb2sgJiYgIV9ob29rX2ZpbmlzaGVkKSB7XHJcbiAgICAgIF9ob29rX2ZpbmlzaGVkID0gdHJ1ZTtcclxuICAgICAgdGhpcy5jb2cuaG9vayhVRSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vblByZVJlYWR5LmVtaXQodGhpcyk7XHJcblxyXG4gICAgY29uc3Qgb3B0ID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5jb2cub3B0aW9ucywgdGhpcy5jb25maWcpO1xyXG5cclxuICAgIHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHVlZGl0b3IgPSBVRS5nZXRFZGl0b3IodGhpcy5pZCwgb3B0KTtcclxuICAgICAgdWVkaXRvci5yZWFkeSgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZSA9IHVlZGl0b3I7XHJcbiAgICAgICAgaWYgKHRoaXMudmFsdWUpIHRoaXMuaW5zdGFuY2Uuc2V0Q29udGVudCh0aGlzLnZhbHVlKTtcclxuICAgICAgICB0aGlzLm9uUmVhZHkuZW1pdCh0aGlzKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB1ZWRpdG9yLmFkZExpc3RlbmVyKCdjb250ZW50Q2hhbmdlJywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB1ZWRpdG9yLmdldENvbnRlbnQoKTtcclxuXHJcbiAgICAgICAgdGhpcy56b25lLnJ1bigoKSA9PiB0aGlzLm9uQ2hhbmdlKHRoaXMudmFsdWUpKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGRlc3Ryb3koKSB7XHJcbiAgICBpZiAodGhpcy5pbnN0YW5jZSkge1xyXG4gICAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMuZXZlbnRzKS5mb3JFYWNoKG5hbWUgPT5cclxuICAgICAgICAgIHRoaXMuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIobmFtZSwgdGhpcy5ldmVudHNbbmFtZV0pLFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcigncmVhZHknKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKCdjb250ZW50Q2hhbmdlJyk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZS5kZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZSA9IG51bGw7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5vbkRlc3Ryb3kuZW1pdCgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXREaXNhYmxlZCgpIHtcclxuICAgIGlmICghdGhpcy5pbnN0YW5jZSkgcmV0dXJuO1xyXG4gICAgaWYgKHRoaXMuX2Rpc2FibGVkKSB7XHJcbiAgICAgIHRoaXMuaW5zdGFuY2Uuc2V0RGlzYWJsZWQoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuaW5zdGFuY2Uuc2V0RW5hYmxlZCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogw6jCjsK3w6XCj8KWVUXDpcKuwp7DpMK+wotcclxuICAgKlxyXG4gICAqIEByZWFkb25seVxyXG4gICAqL1xyXG4gIGdldCBJbnN0YW5jZSgpOiBhbnkge1xyXG4gICAgcmV0dXJuIHRoaXMuaW5zdGFuY2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDDqMKuwr7Dp8K9wq7Dp8K8wpbDqMK+wpHDpcKZwqjDqMKvwq3DqMKowoBcclxuICAgKi9cclxuICBzZXRMYW5ndWFnZShsYW5nOiAnemgtY24nIHwgJ2VuJykge1xyXG4gICAgdGhpcy5zc1xyXG4gICAgICAubG9hZFNjcmlwdChcclxuICAgICAgICBgJHt0aGlzLmNvZy5vcHRpb25zLlVFRElUT1JfSE9NRV9VUkx9L2xhbmcvJHtsYW5nfS8ke2xhbmd9LmpzYCxcclxuICAgICAgKVxyXG4gICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgIHRoaXMuZGVzdHJveSgpO1xyXG5cclxuICAgICAgICAvLyDDpsK4woXDp8KpwrrDqMKvwq3DqMKowoBcclxuICAgICAgICBpZiAoIVVFLl9iYWtfSTE4Tikge1xyXG4gICAgICAgICAgVUUuX2Jha19JMThOID0gVUUuSTE4TjtcclxuICAgICAgICB9XHJcbiAgICAgICAgVUUuSTE4TiA9IHt9O1xyXG4gICAgICAgIFVFLkkxOE5bbGFuZ10gPSBVRS5fYmFrX0kxOE5bbGFuZ107XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdERlbGF5KCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogw6bCt8K7w6XCisKgw6fCvMKWw6jCvsKRw6XCmcKow6TCusKLw6TCu8K2XHJcbiAgICovXHJcbiAgYWRkTGlzdGVuZXIoZXZlbnROYW1lOiBFdmVudFR5cGVzLCBmbjogRnVuY3Rpb24pOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLmV2ZW50c1tldmVudE5hbWVdKSByZXR1cm47XHJcbiAgICB0aGlzLmV2ZW50c1tldmVudE5hbWVdID0gZm47XHJcbiAgICB0aGlzLmluc3RhbmNlLmFkZExpc3RlbmVyKGV2ZW50TmFtZSwgZm4pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogw6fCp8K7w6nCmcKkw6fCvMKWw6jCvsKRw6XCmcKow6TCusKLw6TCu8K2XHJcbiAgICovXHJcbiAgcmVtb3ZlTGlzdGVuZXIoZXZlbnROYW1lOiBFdmVudFR5cGVzKTogdm9pZCB7XHJcbiAgICBpZiAoIXRoaXMuZXZlbnRzW2V2ZW50TmFtZV0pIHJldHVybjtcclxuICAgIHRoaXMuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoZXZlbnROYW1lLCB0aGlzLmV2ZW50c1tldmVudE5hbWVdKTtcclxuICAgIGRlbGV0ZSB0aGlzLmV2ZW50c1tldmVudE5hbWVdO1xyXG4gIH1cclxuXHJcbiAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICB0aGlzLmRlc3Ryb3koKTtcclxuICB9XHJcblxyXG4gIC8vIHJldXNlLXRhYjogaHR0cDovL25nLWFsYWluLmNvbS9jb21wb25lbnRzL3JldXNlLXRhYiMlRTclOTQlOUYlRTUlOTElQkQlRTUlOTElQTglRTYlOUMlOUZcclxuICBfb25SZXVzZUluaXQoKSB7XHJcbiAgICB0aGlzLmRlc3Ryb3koKTtcclxuICAgIHRoaXMuaW5pdERlbGF5KCk7XHJcbiAgfVxyXG5cclxuICB3cml0ZVZhbHVlKHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgIGlmICh0aGlzLmluc3RhbmNlKSB7XHJcbiAgICAgIHRoaXMuaW5zdGFuY2Uuc2V0Q29udGVudCh0aGlzLnZhbHVlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlZ2lzdGVyT25DaGFuZ2UoZm46IChfOiBhbnkpID0+IHt9KTogdm9pZCB7XHJcbiAgICB0aGlzLm9uQ2hhbmdlID0gZm47XHJcbiAgfVxyXG4gIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiAoKSA9PiB7fSk6IHZvaWQge1xyXG4gICAgdGhpcy5vblRvdWNoZWQgPSBmbjtcclxuICB9XHJcblxyXG4gIHNldERpc2FibGVkU3RhdGUoaXNEaXNhYmxlZDogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgdGhpcy5kaXNhYmxlZCA9IGlzRGlzYWJsZWQ7XHJcbiAgICB0aGlzLnNldERpc2FibGVkKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XHJcbmltcG9ydCB7IE5nTW9kdWxlLCBNb2R1bGVXaXRoUHJvdmlkZXJzIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5pbXBvcnQgeyBVRWRpdG9yQ29tcG9uZW50IH0gZnJvbSAnLi91ZWRpdG9yLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFVFZGl0b3JDb25maWcgfSBmcm9tICcuL3VlZGl0b3IuY29uZmlnJztcclxuaW1wb3J0IHsgU2NyaXB0U2VydmljZSB9IGZyb20gJy4vc2NyaXB0LnNlcnZpY2UnO1xyXG5cclxuQE5nTW9kdWxlKHtcclxuICBpbXBvcnRzOiBbQ29tbW9uTW9kdWxlXSxcclxuICBwcm92aWRlcnM6IFtTY3JpcHRTZXJ2aWNlXSxcclxuICBkZWNsYXJhdGlvbnM6IFtVRWRpdG9yQ29tcG9uZW50XSxcclxuICBleHBvcnRzOiBbVUVkaXRvckNvbXBvbmVudF0sXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBVRWRpdG9yTW9kdWxlIHtcclxuICBzdGF0aWMgZm9yUm9vdChjb25maWc6IFVFZGl0b3JDb25maWcpOiBNb2R1bGVXaXRoUHJvdmlkZXJzIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5nTW9kdWxlOiBVRWRpdG9yTW9kdWxlLFxyXG4gICAgICBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IFVFZGl0b3JDb25maWcsIHVzZVZhbHVlOiBjb25maWcgfV0sXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG4iLCIvKipcbiAqIEdlbmVyYXRlZCBidW5kbGUgaW5kZXguIERvIG5vdCBlZGl0LlxuICovXG5cbmV4cG9ydCAqIGZyb20gJy4vaW5kZXgnO1xuXG5leHBvcnQge1NjcmlwdFNlcnZpY2UgYXMgw4nCtWF9IGZyb20gJy4vc3JjL3NjcmlwdC5zZXJ2aWNlJzsiXSwibmFtZXMiOlsiU3ViamVjdCIsIkluamVjdGFibGUiLCJJbmplY3QiLCJET0NVTUVOVCIsIkV2ZW50RW1pdHRlciIsIkNvbXBvbmVudCIsIk5HX1ZBTFVFX0FDQ0VTU09SIiwiZm9yd2FyZFJlZiIsIkNoYW5nZURldGVjdGlvblN0cmF0ZWd5IiwiQ2hhbmdlRGV0ZWN0b3JSZWYiLCJOZ1pvbmUiLCJJbnB1dCIsIk91dHB1dCIsIk5nTW9kdWxlIiwiQ29tbW9uTW9kdWxlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O1FBVUUsdUJBQXNDLEdBQVE7WUFBUixRQUFHLEdBQUgsR0FBRyxDQUFLO1lBSnRDLFdBQU0sR0FBRyxLQUFLLENBQUM7WUFDZixTQUFJLEdBQVEsRUFBRSxDQUFDO1lBQ2YsWUFBTyxHQUFxQixJQUFJQSxZQUFPLEVBQVcsQ0FBQztTQUVUO1FBRWxELHdDQUFnQixHQUFoQjtZQUNFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztTQUNyQjtRQUVELDRCQUFJLEdBQUosVUFBSyxJQUFjO1lBQW5CLGlCQVlDO1lBWEMsSUFBSSxJQUFJLENBQUMsTUFBTTtnQkFBRSxPQUFPLElBQUksQ0FBQztZQUU3QixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztZQUVuQixJQUFNLFFBQVEsR0FBbUIsRUFBRSxDQUFDO1lBRXBDLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBQSxNQUFNLElBQUksT0FBQSxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBQSxDQUFDLENBQUM7WUFFL0QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsY0FBTSxPQUFBLEtBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFBLENBQUMsQ0FBQztZQUUxRCxPQUFPLElBQUksQ0FBQztTQUNiO1FBRUQsa0NBQVUsR0FBVixVQUFXLElBQVk7WUFBdkIsaUJBOENDO1lBN0NDLE9BQU8sSUFB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