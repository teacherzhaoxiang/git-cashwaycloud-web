!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("rxjs"),require("@angular/forms")):"function"==typeof define&&define.amd?define("ngx-ueditor",["exports","@angular/core","@angular/common","rxjs","@angular/forms"],e):e(t["ngx-ueditor"]={},t.ng.core,t.ng.common,t.rxjs,t.ng.forms)}(this,function(t,o,n,e,i){"use strict";var s=function(){function t(t){this.doc=t,this.loaded=!1,this.list={},this.emitter=new e.Subject}return t.prototype.getChangeEmitter=function(){return this.emitter},t.prototype.load=function(t){var e=this;if(this.loaded)return this;this.loaded=!0;var n=[];return t.forEach(function(t){return n.push(e.loadScript(t))}),Promise.all(n).then(function(){return e.emitter.next(!0)}),this},t.prototype.loadScript=function(i){var o=this;return new Promise(function(t,e){if(!0!==o.list[i]){o.list[i]=!0;var n=o.doc.createElement("script");n.type="text/javascript",n.src=i,n.charset="utf-8",n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,t({path:i,loaded:!0,status:"Loaded"}))}:n.onload=function(){t({path:i,loaded:!0,status:"Loaded"})},n.onerror=function(){return t({path:i,loaded:!1,status:"Loaded"})},o.doc.getElementsByTagName("head")[0].appendChild(n)}else t({path:i,loaded:!0,status:"Loaded"})})},t.decorators=[{type:o.Injectable}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:o.Inject,args:[n.DOCUMENT]}]}]},t}(),r=function c(){},a=!1,d=function(){function t(t,e,n,i){this.ss=t,this.cog=e,this.cd=n,this.zone=i,this.inited=!1,this.events={},this.loading=!0,this.id="_ueditor-"+Math.random().toString(36).substring(2),this.loadingTip="加载中...",this._disabled=!1,this.delay=50,this.onPreReady=new o.EventEmitter,this.onReady=new o.EventEmitter,this.onDestroy=new o.EventEmitter}return Object.defineProperty(t.prototype,"disabled",{set:function(t){this._disabled=t,this.setDisabled()},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.inited=!0},t.prototype.ngAfterViewInit=function(){var e=this;window.UE?this.initDelay():this.ss.load(this.cog.js).getChangeEmitter().subscribe(function(t){e.initDelay()})},t.prototype.ngOnChanges=function(t){this.inited&&t.config&&(this.destroy(),this.initDelay())},t.prototype.initDelay=function(){var t=this;setTimeout(function(){return t.init()},this.delay)},t.prototype.init=function(){var e=this;if(!window.UE)throw new Error("uedito js文件加载失败");if(!this.instance){this.cog.hook&&!a&&(a=!0,this.cog.hook(UE)),this.onPreReady.emit(this);var n=Object.assign({},this.cog.options,this.config);this.zone.runOutsideAngular(function(){var t=UE.getEditor(e.id,n);t.ready(function(){e.instance=t,e.value&&e.instance.setContent(e.value),e.onReady.emit(e)}),t.addListener("contentChange",function(){e.value=t.getContent(),e.zone.run(function(){return e.onChange(e.value)})})}),this.loading=!1,this.cd.detectChanges()}},t.prototype.destroy=function(){var e=this;this.instance&&this.zone.runOutsideAngular(function(){Object.keys(e.events).forEach(function(t){return e.instance.removeListener(t,e.events[t])}),e.instance.removeListener("ready"),e.instance.removeListener("contentChange"),e.instance.destroy(),e.instance=null}),this.onDestroy.emit()},t.prototype.setDisabled=function(){this.instance&&(this._disabled?this.instance.setDisabled():this.instance.setEnabled())},Object.defineProperty(t.prototype,"Instance",{get:function(){return this.instance},enumerable:!0,configurable:!0}),t.prototype.setLanguage=function(e){var n=this;this.ss.loadScript(this.cog.options.UEDITOR_HOME_URL+"/lang/"+e+"/"+e+".js").then(function(t){n.destroy(),UE._bak_I18N||(UE._bak_I18N=UE.I18N),UE.I18N={},UE.I18N[e]=UE._bak_I18N[e],n.initDelay()})},t.prototype.addListener=function(t,e){this.events[t]||(this.events[t]=e,this.instance.addListener(t,e))},t.prototype.removeListener=function(t){this.events[t]&&(this.instance.removeListener(t,this.events[t]),delete this.events[t])},t.prototype.ngOnDestroy=function(){this.destroy()},t.prototype._onReuseInit=function(){this.destroy(),this.initDelay()},t.prototype.writeValue=function(t){this.value=t,this.instance&&this.instance.setContent(this.value)},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this.disabled=t,this.setDisabled()},t.decorators=[{type:o.Component,args:[{selector:"ueditor",template:'\n  <textarea id="{{id}}" class="ueditor-textarea"></textarea>\n  <div *ngIf="loading" class="loading" [innerHTML]="loadingTip"></div>\n  ',preserveWhitespaces:!1,providers:[{provide:i.NG_VALUE_ACCESSOR,useExisting:o.forwardRef(function(){return t}),multi:!0}],changeDetection:o.ChangeDetectionStrategy.OnPush,styles:["\n      :host {\n        line-height: initial;\n      }\n      :host .ueditor-textarea {\n        display: none;\n      }\n    "]}]}],t.ctorParameters=function(){return[{type:s},{type:r},{type:o.ChangeDetectorRef},{type:o.NgZone}]},t.propDecorators={config:[{type:o.Input}],loadingTip:[{type:o.Input}],disabled:[{type:o.Input}],delay:[{type:o.Input}],onPreReady:[{type:o.Output}],onReady:[{type:o.Output}],onDestroy:[{type:o.Output}]},t}(),u=function(){function e(){}return e.forRoot=function(t){return{ngModule:e,providers:[{provide:r,useValue:t}]}},e.decorators=[{type:o.NgModule,args:[{imports:[n.CommonModule],providers:[s],declarations:[d],exports:[d]}]}],e}();t.ɵa=s,t.UEditorComponent=d,t.UEditorConfig=r,t.UEditorModule=u,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-ueditor.umd.min.js.map