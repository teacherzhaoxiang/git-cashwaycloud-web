{"version":3,"sources":["ng://ngx-ueditor/src/script.service.ts","ng://ngx-ueditor/src/ueditor.config.ts","ng://ngx-ueditor/src/ueditor.component.ts","ng://ngx-ueditor/src/ueditor.module.ts"],"names":["ScriptService","doc","this","loaded","list","emitter","Subject","prototype","getChangeEmitter","load","path","_this","promises","forEach","script","push","loadScript","Promise","all","then","next","resolve","reject","node","createElement","type","src","charset","readyState","onreadystatechange","status","onload","onerror","getElementsByTagName","appendChild","Injectable","Inject","args","DOCUMENT","UEditorConfig","_hook_finished","UEditorComponent","ss","cog","cd","zone","inited","events","loading","id","Math","random","toString","substring","loadingTip","_disabled","delay","onPreReady","EventEmitter","onReady","onDestroy","Object","defineProperty","value","setDisabled","ngOnInit","ngAfterViewInit","window","UE","initDelay","js","subscribe","res","ngOnChanges","changes","config","destroy","setTimeout","init","Error","instance","hook","emit","opt","assign","options","runOutsideAngular","ueditor","getEditor","ready","setContent","addListener","getContent","run","onChange","detectChanges","keys","name","removeListener","setEnabled","setLanguage","lang","UEDITOR_HOME_URL","_bak_I18N","I18N","eventName","fn","ngOnDestroy","_onReuseInit","writeValue","registerOnChange","registerOnTouched","onTouched","setDisabledState","isDisabled","disabled","Component","selector","template","preserveWhitespaces","providers","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","multi","changeDetection","ChangeDetectionStrategy","OnPush","ChangeDetectorRef","NgZone","Input","Output","UEditorModule","forRoot","ngModule","useValue","NgModule","imports","CommonModule","declarations","exports"],"mappings":"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","sourcesContent":["import { Injectable, Inject } from '@angular/core';\r\nimport { DOCUMENT } from '@angular/common';\r\nimport { Subject } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class ScriptService {\r\n  private loaded = false;\r\n  private list: any = {};\r\n  private emitter: Subject<boolean> = new Subject<boolean>();\r\n\r\n  constructor(@Inject(DOCUMENT) private doc: any) {}\r\n\r\n  getChangeEmitter() {\r\n    return this.emitter;\r\n  }\r\n\r\n  load(path: string[]) {\r\n    if (this.loaded) return this;\r\n\r\n    this.loaded = true;\r\n\r\n    const promises: Promise<any>[] = [];\r\n\r\n    path.forEach(script => promises.push(this.loadScript(script)));\r\n\r\n    Promise.all(promises).then(() => this.emitter.next(true));\r\n\r\n    return this;\r\n  }\r\n\r\n  loadScript(path: string): Promise<any> {\r\n    return new Promise((resolve, reject) => {\r\n      if (this.list[path] === true) {\r\n        resolve(<any>{\r\n          path: path,\r\n          loaded: true,\r\n          status: 'Loaded',\r\n        });\r\n        return;\r\n      }\r\n\r\n      this.list[path] = true;\r\n\r\n      const node = this.doc.createElement('script');\r\n      node.type = 'text/javascript';\r\n      node.src = path;\r\n      node.charset = 'utf-8';\r\n      if (node.readyState) {\r\n        // IE\r\n        node.onreadystatechange = () => {\r\n          if (node.readyState === 'loaded' || node.readyState === 'complete') {\r\n            node.onreadystatechange = null;\r\n            resolve(<any>{\r\n              path: path,\r\n              loaded: true,\r\n              status: 'Loaded',\r\n            });\r\n          }\r\n        };\r\n      } else {\r\n        node.onload = () => {\r\n          resolve(<any>{\r\n            path: path,\r\n            loaded: true,\r\n            status: 'Loaded',\r\n          });\r\n        };\r\n      }\r\n      node.onerror = () =>\r\n        resolve(<any>{\r\n          path: path,\r\n          loaded: false,\r\n          status: 'Loaded',\r\n        });\r\n      this.doc.getElementsByTagName('head')[0].appendChild(node);\r\n    });\r\n  }\r\n}\r\n","export interface UEditorOptions {\r\n  [key: string]: any;\r\n  /** å½ä½ ä½¿ç¨ `cdn` æ¶ï¼å±æ§å¿å¡«ï¼ç¸å½äºæ´ä¸ª Ueditor æéè¦è¯­è¨ãä¸»é¢ãå¯¹è¯æ¡ç­æ ¹è·¯å¾ */\r\n  UEDITOR_HOME_URL: string;\r\n  /** æå¡å¨ç»ä¸è¯·æ±æ¥å£è·¯å¾ */\r\n  serverUrl?: string;\r\n  /** å·¥å·æ ä¸çææçåè½æé®åä¸ææ¡ï¼å¯ä»¥å¨newç¼è¾å¨çå®ä¾æ¶éæ©èªå·±éè¦çä»æ°å®ä¹ */\r\n  toolbars?: string[][];\r\n  /** ç¼è¾å¨å±çº§çåºæ°,é»è®¤ `900` */\r\n  zIndex?: number;\r\n}\r\n\r\nexport class UEditorConfig {\r\n  /**\r\n   * Ueditor [åç«¯éç½®é¡¹](http://fex.baidu.com/ueditor/#start-config)\r\n   */\r\n  options: UEditorOptions;\r\n\r\n  /**\r\n   * æå®ueditor.jsåconfig.jsè·¯å¾ï¼è¿æ¯å¯å¨ Ueditor å¿å¤\r\n   * - **å¡å¿**æå® `options.UEDITOR_HOME_URL`ï¼è½ç¶é»è®¤ä¼æ ¹æ® `config.js` è·¯å¾è·åï¼ä½æäºç¯å¢ä¸æ´æä¿è¯ï¼\r\n   */\r\n  js: string[];\r\n\r\n  /**\r\n   * Hook\r\n   * - å¨ Ueditor å¯¹è±¡å è½½å®æåæ§è¡\r\n   * - åªæ§è¡ä¸æ¬¡\r\n   */\r\n  hook?: (ue: any) => void;\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  forwardRef,\r\n  OnDestroy,\r\n  EventEmitter,\r\n  Output,\r\n  OnInit,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  AfterViewInit,\r\n  OnChanges,\r\n  SimpleChanges,\r\n  NgZone,\r\n} from '@angular/core';\r\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor } from '@angular/forms';\r\n\r\nimport { ScriptService } from './script.service';\r\nimport { UEditorConfig } from './ueditor.config';\r\n\r\ndeclare const window: any;\r\ndeclare const UE: any;\r\nlet _hook_finished = false;\r\n\r\nexport type EventTypes =\r\n  | 'destroy'\r\n  | 'reset'\r\n  | 'focus'\r\n  | 'langReady'\r\n  | 'beforeExecCommand'\r\n  | 'afterExecCommand'\r\n  | 'firstBeforeExecCommand'\r\n  | 'beforeGetContent'\r\n  | 'afterGetContent'\r\n  | 'getAllHtml'\r\n  | 'beforeSetContent'\r\n  | 'afterSetContent'\r\n  | 'selectionchange'\r\n  | 'beforeSelectionChange'\r\n  | 'afterSelectionChange';\r\n\r\n@Component({\r\n  selector: 'ueditor',\r\n  template: `\r\n  <textarea id=\"{{id}}\" class=\"ueditor-textarea\"></textarea>\r\n  <div *ngIf=\"loading\" class=\"loading\" [innerHTML]=\"loadingTip\"></div>\r\n  `,\r\n  preserveWhitespaces: false,\r\n  styles: [\r\n    `\r\n      :host {\r\n        line-height: initial;\r\n      }\r\n      :host .ueditor-textarea {\r\n        display: none;\r\n      }\r\n    `,\r\n  ],\r\n  providers: [\r\n    {\r\n      provide: NG_VALUE_ACCESSOR,\r\n      useExisting: forwardRef(() => UEditorComponent),\r\n      multi: true,\r\n    },\r\n  ],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class UEditorComponent\r\n  implements OnInit, AfterViewInit, OnChanges, OnDestroy, ControlValueAccessor {\r\n  private instance: any;\r\n  private value: string;\r\n  private inited = false;\r\n  private events: any = {};\r\n\r\n  private onChange: (value: string) => void;\r\n  private onTouched: () => void;\r\n\r\n  loading = true;\r\n  id = `_ueditor-${Math.random()\r\n    .toString(36)\r\n    .substring(2)}`;\r\n\r\n  @Input()\r\n  config: any;\r\n  @Input()\r\n  loadingTip = 'å è½½ä¸­...';\r\n  @Input()\r\n  set disabled(value: boolean) {\r\n    this._disabled = value;\r\n    this.setDisabled();\r\n  }\r\n  private _disabled = false;\r\n\r\n  /** å»¶è¿åå§å */\r\n  @Input()\r\n  delay = 50;\r\n\r\n  @Output()\r\n  readonly onPreReady = new EventEmitter<UEditorComponent>();\r\n  @Output()\r\n  readonly onReady = new EventEmitter<UEditorComponent>();\r\n  @Output()\r\n  readonly onDestroy = new EventEmitter();\r\n\r\n  constructor(\r\n    private ss: ScriptService,\r\n    private cog: UEditorConfig,\r\n    private cd: ChangeDetectorRef,\r\n    private zone: NgZone,\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.inited = true;\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    // å·²ç»å­å¨å¯¹è±¡æ é¡»è¿å¥æå è½½æ¨¡å¼\r\n    if (window.UE) {\r\n      this.initDelay();\r\n      return;\r\n    }\r\n\r\n    this.ss\r\n      .load(this.cog.js)\r\n      .getChangeEmitter()\r\n      .subscribe(res => {\r\n        this.initDelay();\r\n      });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (this.inited && changes.config) {\r\n      this.destroy();\r\n      this.initDelay();\r\n    }\r\n  }\r\n\r\n  private initDelay() {\r\n    setTimeout(() => this.init(), this.delay);\r\n  }\r\n\r\n  private init() {\r\n    if (!window.UE) throw new Error('uedito jsæä»¶å è½½å¤±è´¥');\r\n\r\n    if (this.instance) return;\r\n\r\n    // registrer hook\r\n    if (this.cog.hook && !_hook_finished) {\r\n      _hook_finished = true;\r\n      this.cog.hook(UE);\r\n    }\r\n\r\n    this.onPreReady.emit(this);\r\n\r\n    const opt = Object.assign({}, this.cog.options, this.config);\r\n\r\n    this.zone.runOutsideAngular(() => {\r\n      const ueditor = UE.getEditor(this.id, opt);\r\n      ueditor.ready(() => {\r\n        this.instance = ueditor;\r\n        if (this.value) this.instance.setContent(this.value);\r\n        this.onReady.emit(this);\r\n      });\r\n\r\n      ueditor.addListener('contentChange', () => {\r\n        this.value = ueditor.getContent();\r\n\r\n        this.zone.run(() => this.onChange(this.value));\r\n      });\r\n    });\r\n    this.loading = false;\r\n    this.cd.detectChanges();\r\n  }\r\n\r\n  private destroy() {\r\n    if (this.instance) {\r\n      this.zone.runOutsideAngular(() => {\r\n        Object.keys(this.events).forEach(name =>\r\n          this.instance.removeListener(name, this.events[name]),\r\n        );\r\n        this.instance.removeListener('ready');\r\n        this.instance.removeListener('contentChange');\r\n        this.instance.destroy();\r\n        this.instance = null;\r\n      });\r\n    }\r\n    this.onDestroy.emit();\r\n  }\r\n\r\n  private setDisabled() {\r\n    if (!this.instance) return;\r\n    if (this._disabled) {\r\n      this.instance.setDisabled();\r\n    } else {\r\n      this.instance.setEnabled();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * è·åUEå®ä¾\r\n   *\r\n   * @readonly\r\n   */\r\n  get Instance(): any {\r\n    return this.instance;\r\n  }\r\n\r\n  /**\r\n   * è®¾ç½®ç¼è¾å¨è¯­è¨\r\n   */\r\n  setLanguage(lang: 'zh-cn' | 'en') {\r\n    this.ss\r\n      .loadScript(\r\n        `${this.cog.options.UEDITOR_HOME_URL}/lang/${lang}/${lang}.js`,\r\n      )\r\n      .then(res => {\r\n        this.destroy();\r\n\r\n        // æ¸ç©ºè¯­è¨\r\n        if (!UE._bak_I18N) {\r\n          UE._bak_I18N = UE.I18N;\r\n        }\r\n        UE.I18N = {};\r\n        UE.I18N[lang] = UE._bak_I18N[lang];\r\n\r\n        this.initDelay();\r\n      });\r\n  }\r\n\r\n  /**\r\n   * æ·»å ç¼è¾å¨äºä»¶\r\n   */\r\n  addListener(eventName: EventTypes, fn: Function): void {\r\n    if (this.events[eventName]) return;\r\n    this.events[eventName] = fn;\r\n    this.instance.addListener(eventName, fn);\r\n  }\r\n\r\n  /**\r\n   * ç§»é¤ç¼è¾å¨äºä»¶\r\n   */\r\n  removeListener(eventName: EventTypes): void {\r\n    if (!this.events[eventName]) return;\r\n    this.instance.removeListener(eventName, this.events[eventName]);\r\n    delete this.events[eventName];\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy();\r\n  }\r\n\r\n  // reuse-tab: http://ng-alain.com/components/reuse-tab#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F\r\n  _onReuseInit() {\r\n    this.destroy();\r\n    this.initDelay();\r\n  }\r\n\r\n  writeValue(value: string): void {\r\n    this.value = value;\r\n    if (this.instance) {\r\n      this.instance.setContent(this.value);\r\n    }\r\n  }\r\n\r\n  registerOnChange(fn: (_: any) => {}): void {\r\n    this.onChange = fn;\r\n  }\r\n  registerOnTouched(fn: () => {}): void {\r\n    this.onTouched = fn;\r\n  }\r\n\r\n  setDisabledState(isDisabled: boolean): void {\r\n    this.disabled = isDisabled;\r\n    this.setDisabled();\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule, ModuleWithProviders } from '@angular/core';\r\n\r\nimport { UEditorComponent } from './ueditor.component';\r\nimport { UEditorConfig } from './ueditor.config';\r\nimport { ScriptService } from './script.service';\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  providers: [ScriptService],\r\n  declarations: [UEditorComponent],\r\n  exports: [UEditorComponent],\r\n})\r\nexport class UEditorModule {\r\n  static forRoot(config: UEditorConfig): ModuleWithProviders {\r\n    return {\r\n      ngModule: UEditorModule,\r\n      providers: [{ provide: UEditorConfig, useValue: config }],\r\n    };\r\n  }\r\n}\r\n"]}